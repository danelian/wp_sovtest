$(document).ready(function () {
  // VARS
  const body = document.querySelector('body')
  const header = document.getElementById('header')

  // ---------- UPLOAD DOCUMENT IN FILE INPUT ------------
  const heroFileInput = document.querySelector('.hero .file-inputs')
  if (heroFileInput) {
    document.querySelector('.hero .file-inputs').addEventListener('change', function () {
        var heroFileInput = this
        var heroFileItem = heroFileInput.parentNode.querySelector('.file-item')

        if (heroFileItem) {
          heroFileItem.style.display = 'block'
        } else {
          heroFileItem = document.createElement('div')
          heroFileItem.classList.add('file-item')

          var heroDeleteButton = document.createElement('button')
          heroDeleteButton.classList.add('file-delete')
          heroDeleteButton.innerHTML =
            '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="8" r="8" fill="#5B534D"/><path d="M8.00035 7.29325L10.4752 4.81836L11.1823 5.52546L8.70745 8.00035L11.1823 10.4752L10.4752 11.1823L8.00035 8.70745L5.52546 11.1823L4.81836 10.4752L7.29325 8.00035L4.81836 5.52546L5.52546 4.81836L8.00035 7.29325Z" fill="white"/></svg>'
          heroDeleteButton.addEventListener('click', function () {
            heroFileInput.value = ''
            heroFileItem.style.display = 'none'
          })

          var heroFileItemIcon = document.createElement('div')
          heroFileItemIcon.classList.add('file-item-icon')

          heroFileItem.appendChild(heroDeleteButton)
          heroFileItem.appendChild(heroFileItemIcon)

          var heroFileUpload = document.querySelector('.hero .file-upload')
          heroFileUpload.appendChild(heroFileItem)
        }
      })
  }

  const ctaFileInput = document.querySelector('.cta .file-inputs')
  if (ctaFileInput) {
    document.querySelector('.cta .file-inputs').addEventListener('change', function () {
        var ctaFileInput = this
        var ctaFileItem = ctaFileInput.parentNode.querySelector('.file-item')

        if (ctaFileItem) {
          ctaFileItem.style.display = 'block'
        } else {
          ctaFileItem = document.createElement('div')
          ctaFileItem.classList.add('file-item')

          var ctaDeleteButton = document.createElement('button')
          ctaDeleteButton.classList.add('file-delete')
          ctaDeleteButton.innerHTML =
            '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="8" r="8" fill="#5B534D"/><path d="M8.00035 7.29325L10.4752 4.81836L11.1823 5.52546L8.70745 8.00035L11.1823 10.4752L10.4752 11.1823L8.00035 8.70745L5.52546 11.1823L4.81836 10.4752L7.29325 8.00035L4.81836 5.52546L5.52546 4.81836L8.00035 7.29325Z" fill="white"/></svg>'
          ctaDeleteButton.addEventListener('click', function () {
            ctaFileInput.value = ''
            ctaFileItem.style.display = 'none'
          })

          var ctaFileItemIcon = document.createElement('div')
          ctaFileItemIcon.classList.add('file-item-icon')

          ctaFileItem.appendChild(ctaDeleteButton)
          ctaFileItem.appendChild(ctaFileItemIcon)

          var ctaFileUpload = document.querySelector('.cta .file-upload')
          ctaFileUpload.appendChild(ctaFileItem)
        }
      })
  }
  
  // -------------- SERVICE NAME IN INPUT ----------------
  setTimeout(function() {
    const serviceName = document.querySelector('.hero__title');
    const inputServiceName = document.querySelectorAll('.input_service_title');
    if (serviceName && inputServiceName) {
      inputServiceName.forEach(input => {
        input.value = serviceName.textContent;
      })
    }
  }, 5000);

  // ---------------- HEADER MOBILE ------------------
  // if (window.innerWidth <= 1024) {
  //   window.addEventListener('scroll', function() {
  //     const header = document.getElementById('header');
  //     if (window.scrollY >= 100) {
  //       header.classList.add('active');
  //     } else {
  //       header.classList.remove('active');
  //     }
  //   });
  // }

  // -------------------- MAIN GRID ----------------------
  var mainCards = document.querySelector('.main__cards')
  if (mainCards) {
    var mainCardsArray = mainCards.querySelectorAll(
      '.main-card.one, .main-card.two, .main-card.three, .main-card.four, .main-card.five'
    )
    mainCardsArray.forEach(function (element) {
      element.addEventListener('mouseover', function () {
        mainCards.classList.add(element.classList[1])
      })
      element.addEventListener('mouseout', function () {
        mainCards.classList.remove(element.classList[1])
      })
    })
  }

  // ------------------- BURGER MENU ---------------------
  const burgerMenu = document.getElementById('burger-menu'),
    burgerOpen = document.getElementById('burger-open'),
    burgerClose = document.getElementById('burger-close'),
    burgerLinks = document.querySelectorAll(
      '.burger__menu>ul>li>a, .burger__menu .nav__links a'
    )
  burgerOpen.addEventListener('click', () => {
    burgerMenu.classList.add('open-menu')
    body.classList.add('dis-scroll')
  })
  burgerClose.addEventListener('click', () => {
    burgerMenu.classList.remove('open-menu')
    body.classList.remove('dis-scroll')
  })
  const linkAction = () => {
    const burgerMenu = document.getElementById('burger-menu')
    burgerMenu.classList.remove('open-menu')
    body.classList.remove('dis-scroll')
  }
  burgerLinks.forEach(n => n.addEventListener('click', linkAction))

  // ---------------------- SWIPER -----------------------
  var aboutImgSwiper = new Swiper('.aboutImgSwiper', {
    loop: true,
    autoplay: {
      delay: 3000,
      disableOnInteraction: false
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true
    }
  })
  var aboutInfoSwiper = new Swiper('.aboutInfoSwiper', {
    slidesPerView: 1,
    spaceBetween: 16,
    loop: true,
    autoplay: {
      delay: 3000,
      disableOnInteraction: false
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true
    },
    breakpoints: {
      576: {
        slidesPerView: 'auto',
        spaceBetween: 20
      }
    }
  })
  var gallerySwiper = new Swiper('.gallerySwiper', {
    slidesPerView: 1,
    spaceBetween: 20,
    loop: true,
    autoplay: {
      delay: 3000,
      disableOnInteraction: false
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev'
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true
    },
    breakpoints: {
      576: {
        slidesPerView: 2
      },
      991: {
        slidesPerView: 3
      }
    }
  })

  // ------ Padding top for sections on Desktop ------
  if (window.innerWidth >= 1025) {
    // const headerHeight = header.offsetHeight
    const elements = document.querySelectorAll('.section')
    elements.forEach(element => {
      element.style.paddingTop = '90px'
      // element.style.paddingTop = headerHeight + 'px'
    })
  }

  

  if ($('#pagepiling').is('*')) {
    if (window.innerWidth >= 1025) {
      $('#pagepiling').pagepiling({
        menu: '#pp-menu',
        direction: 'vertical',
        verticalCentered: true,
        anchors: ['section1', 'section2', 'section3', 'section4', 'section5'],
        sectionsColor: ['#e1e1e1', '#ffffff', '#f4f4f4', '#ffffff', '#ffffff'],
        anchors: [],
        scrollingSpeed: 700,
        easing: 'swing',
        loopBottom: false,
        loopTop: false,
        css3: true,
        navigation: {
          textColor: 'transparent',
          bulletsColor: 'transparent',
          position: 'right',
        },
        normalScrollElements: null,
        normalScrollElementTouchThreshold: 5,
        touchSensitivity: 5,
        keyboardScrolling: true,
        sectionSelector: '.section',
        animateAnchor: false,

        afterRender: function () {},
        onLeave: function (index, nextIndex, direction) {
          if (nextIndex > 1) {
            $('#header').addClass('active');
          } else {
            $('#header').removeClass('active');
          }
        },
        afterLoad: {
          function (anchorLink, index) {
            if (index > 1) {
              $('#header').addClass('active');
            } else {
              $('#header').removeClass('active');
            }
          },
          function(anchorLink, index){
            if(index>1){
              $('#pp-nav').removeClass('custom');
            }else{
              $('#pp-nav').addClass('custom');
            }
          }
        }
      })
    }
  }
})
